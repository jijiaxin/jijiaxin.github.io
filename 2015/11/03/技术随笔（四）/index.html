	<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>技术随笔（四） | 微凉一季</title>
  <meta name="author" content="季訫">
  
  <meta name="description" content="往事如烟，随风而逝">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="技术随笔（四）"/>
  <meta property="og:site_name" content="微凉一季"/>

  
  
		<!-- favicon -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#009688">
		<!-- favicon end -->
    <!-- <link href="/favicon.ico" rel="icon"> -->
  

  <!-- toc -->
  <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css">

  <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">

  <!-- material design -->
	<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css">
  <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
	<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  
  <!-- 百度统计 -->
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?965a6e7fe7dbf925b4191360c79b5e64";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  

  

  <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/libs/jquery-2.0.3.min.js" type="text/javascript"><\/script>')</script>

</head>

 	<body>
	  <nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">菜单</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">微凉一季</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="/" title="">
                    <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                <li>
                    <a href="/archives" title="">
                    <i class="fa fa-list"></i>存档
                    </a>
                </li>
                
                <li>
                    <a href="/about" title="">
                    <i class="fa fa-info-circle"></i>关于
                    </a>
                </li>
                
                <li>
                    <a href="/atom.xml" title="这是一个订阅源">
                    <i class="fa fa-rss"></i>RSS
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>

	  <div class="container" >
	    <div class="row">
	
	<div class="col-md-9 center-content">
	

		<div class="content">
			<!-- index -->
		   

			  		<h2>技术随笔（四）</h2>
					
					<div>
						<span class="post-time">2015-11-03 15:51:38</span>
					</div>	
					

					<div class="article-content">
						<h3 id="11-4号-周三"><a href="#11-4号-周三" class="headerlink" title="11/4号  周三"></a>11/4号  周三</h3><p>今天和小伙伴一起建了个github协作组。。AndroidDreamApp。、、嘻嘻。<br><a href="https://github.com/AndroidDreamGroup" target="_blank" rel="external">https://github.com/AndroidDreamGroup</a></p>
<h3 id="11-5号-周四"><a href="#11-5号-周四" class="headerlink" title="11/5号  周四"></a>11/5号  周四</h3><p>夜。。。今夜无话。。。</p>
<a id="more"></a>
<h3 id="11-6号-周五"><a href="#11-6号-周五" class="headerlink" title="11/6号  周五"></a>11/6号  周五</h3><h3 id="11-8号-周日"><a href="#11-8号-周日" class="headerlink" title="11/8号  周日"></a>11/8号  周日</h3><p>开机出现Thinkpad的Logo的时候按F1进BIOS，选第一项“config”进入以后寻keyboard/mouse”——“change to “F1-F12”keys”把Default改成Legacy，按F10，选yes保存，这样就可以了。<br>然而，我的没有这个选项，why？？？<br>Esc+Fn  ===  关闭Fn功能。</p>
<h3 id="11-9号-周一"><a href="#11-9号-周一" class="headerlink" title="11/9号  周一"></a>11/9号  周一</h3><h3 id="11-10号-周二"><a href="#11-10号-周二" class="headerlink" title="11/10号 周二"></a>11/10号 周二</h3><p>Application.ActivityLifecycleCallbacks这个接口可以用来处理生命周期相关的一些东西。4.0以上的api。印象笔记的demo里面用了这个接口，难怪感觉有点熟悉。</p>
<h3 id="11-11号-周三"><a href="#11-11号-周三" class="headerlink" title="11/11号 周三"></a>11/11号 周三</h3><p>在某些手机上，Webview承载视频时，activity销毁后，视频资源没有被销毁。解决办法：在onDestory之前修改url为空地址。</p>
<h3 id="11-12号-周四"><a href="#11-12号-周四" class="headerlink" title="11/12号 周四"></a>11/12号 周四</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">RelativeLayout rl = <span class="keyword">new</span> RelativeLayout(<span class="keyword">this</span>);  </div><div class="line"><span class="comment">//设置RelativeLayout布局的宽高  </span></div><div class="line">RelativeLayout.LayoutParams relLayoutParams=<span class="keyword">new</span> RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);  </div><div class="line"><span class="keyword">this</span>.addView(rl, relLayoutParams);  </div><div class="line"><span class="comment">//就是设置个可见不可见也要post一下，否则无效。因为设置可见不可见也是耗时的。可以还没设置好，或者view没添加，滚动不了</span></div><div class="line">handler.post(<span class="keyword">new</span> Runnable() &#123;  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  </div><div class="line">        scrollView.fullScroll(ScrollView.FOCUS_DOWN);  </div><div class="line">    &#125;  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//防止安装apk点击open重启，在luncher主页设置</span></div><div class="line"><span class="keyword">if</span> ((getIntent().getFlags() &amp; Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != <span class="number">0</span>) &#123;</div><div class="line">    finish();</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="11-13号-周五-凌点20分钟"><a href="#11-13号-周五-凌点20分钟" class="headerlink" title="11/13号 周五 凌点20分钟"></a>11/13号 周五 凌点20分钟</h3><p>不管有没有准备好，我要动手搞了，做一个为自己中意的app。就从5.0开始适配，不管低版本，这必须是个小众的app。<br>功能可以不要太多太花哨，但是每一行代码都要尽量高效和规范。</p>
<p>新进的项目，项目组需要统一Eclipse的代码注释模板和格式化模板，导入XML模板后，发行用ctrl+shift+f后注释全部乱掉，现将解决办法记录如下：<br>window–preferences–java–code style–formatter ，点击edit按钮，在Tab上选择comments，将general settings中的#所有复选框勾掉，保存即可。# 只去掉format line comments on first column即可。</p>
<p>关于long和double的那些事：<br>Integer a = 3跟Integer a = new Integer(3)的区别在于，前者在被编译器自动装箱，也就是会变成Integer a = Integer.valueOf(3)，而后者和创建其他类的实例没有区别。valueOf源码（其中包含了是否要创建实例还是引用池中示例的逻辑）。<br>Integer和Long都cache -128～127的数字，都是指向同一个常量池里的对象的（类似与String的常量池，只是有作用范围）。<br>而Float和Double是没有这个机制的。<br>所以：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">Integer a = <span class="number">3</span>;</div><div class="line">Integer b = <span class="number">3</span>;</div><div class="line">System.out.println(a == b);</div><div class="line"></div><div class="line">Integer i = <span class="keyword">new</span> Integer(<span class="number">3</span>);</div><div class="line">Integer j = <span class="keyword">new</span> Integer(<span class="number">3</span>);</div><div class="line">System.out.println(i == j);</div><div class="line"></div><div class="line">Long l = <span class="number">3L</span>;</div><div class="line">Long k = <span class="number">3L</span>;</div><div class="line">System.out.println(l == k);</div><div class="line"></div><div class="line">Float f = <span class="number">3.0f</span>;</div><div class="line">Float g = <span class="number">3.0f</span>;</div><div class="line">System.out.println(f == g);</div><div class="line"></div><div class="line">Double c = <span class="number">3.00</span>D;</div><div class="line">Double d = <span class="number">3.00</span>D;</div><div class="line">System.out.println(c == d);</div><div class="line"></div><div class="line">得到的结果为:</div><div class="line"><span class="keyword">true</span></div><div class="line"><span class="keyword">false</span></div><div class="line"><span class="keyword">true</span></div><div class="line"><span class="keyword">false</span></div><div class="line"><span class="keyword">false</span></div></pre></td></tr></table></figure>
<h3 id="11-15号-周天"><a href="#11-15号-周天" class="headerlink" title="11/15号 周天"></a>11/15号 周天</h3><p>类名首字母大写:<br> methodName = methodName.substring(0, 1).toUpperCase() + methodName.substring(1);<br> substring(0,1)  0算1不算在内。。。。。substring（1）1算在内，1往后的。</p>
<p>格式化json打印的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LINE_SEPARATOR = System.getProperty(<span class="string">"line.separator"</span>);</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> JSON_INDENT = <span class="number">4</span>;</div><div class="line"><span class="comment">/**  </span></div><div class="line">* <span class="doctag">@param</span> TAG：提示标示类信息，随意，一般可为方法名加短自定义标示。如getPlan+jijiaxin,用于过滤。</div><div class="line">* <span class="doctag">@param</span> pureJsonString: 纯洁的json串，勿拼接无关String  。</div><div class="line">* <span class="doctag">@return</span> void</div><div class="line">*/ </div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">json</span><span class="params">(String TAG,String pureJsonString)</span></span>&#123;</div><div class="line"><span class="keyword">if</span>(DEBUG)&#123;</div><div class="line">    String messageSrc = getFunctionInfo()+ <span class="string">" - "</span> + TAG + <span class="string">" - ↓"</span>;</div><div class="line">    String messageDst = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">if</span> (pureJsonString.startsWith(<span class="string">"&#123;"</span>)) &#123;</div><div class="line">            JSONObject jsonObject = <span class="keyword">new</span> JSONObject(pureJsonString);</div><div class="line">            messageDst = jsonObject.toString(JSON_INDENT);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pureJsonString.startsWith(<span class="string">"["</span>)) &#123;</div><div class="line">            JSONArray jsonArray = <span class="keyword">new</span> JSONArray(pureJsonString);</div><div class="line">            messageDst = jsonArray.toString(JSON_INDENT);</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">catch</span> (JSONException e) &#123;</div><div class="line"><span class="comment">//                Log.e(TAG, e.getCause().getMessage() + "\n" + pureJsonString);</span></div><div class="line">        configurableLogType(TAG, e.getCause().getMessage() + <span class="string">"\n"</span> + pureJsonString);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"><span class="comment">//            Log.e(TAG, messageSrc + LINE_SEPARATOR);</span></div><div class="line">    configurableLogType(TAG, messageSrc + LINE_SEPARATOR);</div><div class="line">    printLine(TAG, <span class="keyword">true</span>);</div><div class="line">    String[] lines = messageDst.split(LINE_SEPARATOR);</div><div class="line">    StringBuilder jsonContent = <span class="keyword">new</span> StringBuilder();</div><div class="line">    <span class="keyword">for</span> (String line : lines) &#123;</div><div class="line">        jsonContent.append(<span class="string">"║ "</span>).append(line).append(LINE_SEPARATOR);</div><div class="line">    &#125;</div><div class="line"><span class="comment">//            Log.e(TAG, jsonContent.toString());</span></div><div class="line">    configurableLogType(TAG, jsonContent.toString());</div><div class="line">    printLine(TAG, <span class="keyword">false</span>);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//此方法用以改变打印json的Log的类型，为简化，先默认e，可根据习惯改为d,i,w,a等类型。</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">configurableLogType</span><span class="params">(String TAG,String printStr)</span></span>&#123;</div><div class="line">Log.e(TAG, printStr);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printLine</span><span class="params">(String TAG, <span class="keyword">boolean</span> isTop)</span> </span>&#123;</div><div class="line"><span class="keyword">if</span> (isTop) &#123;</div><div class="line"><span class="comment">//            Log.e(TAG, "╔════════════════════════════════════════════════════════════════════════");</span></div><div class="line">    configurableLogType(TAG, <span class="string">"╔════════════════════════════════════════════════════════════════════════"</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line"><span class="comment">//            Log.e(TAG, "╚════════════════════════════════════════════════════════════════════════");</span></div><div class="line">    configurableLogType(TAG, <span class="string">"╚════════════════════════════════════════════════════════════════════════"</span>);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>选中你的方法所有代码后alt＋shift＋j是给方法加注释，不选中是给类加作者信息</p>
<h3 id="11-17号-周二"><a href="#11-17号-周二" class="headerlink" title="11/17号 周二"></a>11/17号 周二</h3><p>Observer    观察者  接收变化的回调。<br>Observable  可观察的  就是被观察的嘛。主体。<br>try体里面的逻辑有异常才不执行。try体外的逻辑永远执行，设置try体就是为了不影响外面的流程。</p>
<p>继承是子女，同包是朋友<br>default（包访问权限） 只允许在同一个包中进行访问。 子类不在一个包里也不能访问了。 default就是friendly，不写时默认为friendly<br>protected（继承访问权限） 子类在不同包也能访问。  朋友，子女都能访问。</p>
<table>
<thead>
<tr>
<th>作用域</th>
<th>当前类</th>
<th>同一package</th>
<th>子孙类</th>
<th>其他package </th>
</tr>
</thead>
<tbody>
<tr>
<td>public</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√ </td>
</tr>
<tr>
<td>protected</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>× </td>
</tr>
<tr>
<td>friendly</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>× </td>
</tr>
<tr>
<td>private</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>× </td>
</tr>
</tbody>
</table>
<h3 id="11-19号-周四"><a href="#11-19号-周四" class="headerlink" title="11/19号 周四"></a>11/19号 周四</h3><p>某些情况当系统需要将Activity回收以便节省内存时，Activity内部保持的fragment不会被销毁，可用于保存/恢复数据。此时容易出现fragment重叠的情况。</p>
<h3 id="11-21号-周六"><a href="#11-21号-周六" class="headerlink" title="11/21号 周六"></a>11/21号 周六</h3><p>360超级root 很好用，一下就把中兴nubia给root了。但是却搞不定魅族。</p>
<p><code>android:fitsSystemWindows=&quot;true&quot;</code>这个属性很重要，只要设置了toolbar，用drawerlayout里面加上这个属性，drawer就会顶到状态栏里面去。<br>另外，toolbar要手动设置background颜色为colorPrimary。否则是透明白色的</p>
<h3 id="11-22号-周天"><a href="#11-22号-周天" class="headerlink" title="11/22号 周天"></a>11/22号 周天</h3><p>setNavigationIcon(),setOnMenuItemClickListener() 需要放在 setSupportActionBar之后才会生效<br>design抽屉布局，汉堡包点击失效，只要记得加上</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> onPostCreate(Bundle savedInstanceState) &#123;</div><div class="line">    <span class="keyword">super</span>.onPostCreate(savedInstanceState);</div><div class="line">    drawerToggle.syncState();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> onConfigurationChanged(Configuration newConfig) &#123;</div><div class="line">    <span class="keyword">super</span>.onConfigurationChanged(newConfig);</div><div class="line">    drawerToggle.onConfigurationChanged(newConfig);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> onOptionsItemSelected(MenuItem item) &#123;</div><div class="line">    <span class="comment">// 重点，不写这个，汉堡包的按钮点击没反应</span></div><div class="line">    <span class="keyword">if</span> (drawerToggle.onOptionsItemSelected(item))</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> id = item.getItemId();</div><div class="line"></div><div class="line">    <span class="comment">//noinspection SimplifiableIfStatement</span></div><div class="line">    <span class="keyword">if</span> (id == R.id.action_settings) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>设置toolBar设置成箭头</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> ActionBar actionBar = activity.getSupportActionBar();</div><div class="line">       <span class="keyword">if</span> (actionBar != <span class="keyword">null</span>) &#123;</div><div class="line">       <span class="comment">//  这个是设置成箭头</span></div><div class="line">           actionBar.setDisplayHomeAsUpEnabled(<span class="keyword">true</span>);</div><div class="line">           actionBar.setDisplayShowHomeEnabled(<span class="keyword">true</span>);</div><div class="line">           actionBar.setDisplayShowTitleEnabled(<span class="keyword">true</span>);</div><div class="line">           actionBar.setDisplayUseLogoEnabled(<span class="keyword">false</span>);</div><div class="line">           actionBar.setHomeButtonEnabled(<span class="keyword">true</span>);</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
<p>用了android.support.design.widget.CoordinatorLayout。设置了toolbar，再设置内容布局，内容布局会顶到toolbar下面被toolbar挡住，这是她俩不知道协同工作，此时只需要toolbar外层包个android.support.design.widget.AppBarLayout，toolbar就知道跟内容协同工作了。</p>
<p>android.support.design.widget.TabLayout一定要设置主题，否则title颜色是黑色的，设置白色也无效，主题决定优先级较高。<br>app:tabMode=”scrollable”优先级高于app:tabGravity=”fill”</p>
<p>AS里面重构的快捷键是shift+F6.跟eclipse中的shift+alt+R一样作用，<br>Studio用这个快捷键在java里面是红框的，在xml弹出来对话框，特么的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> dp = <span class="number">10</span></div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dp2px</span><span class="params">(<span class="keyword">int</span> dpVal)</span>  </span></div><div class="line">    &#123;  </div><div class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,  </div><div class="line">                dpVal, getResources().getDisplayMetrics());  </div><div class="line">    &#125;  </div><div class="line"><span class="keyword">return</span> 的<span class="keyword">int</span> 就是像素，例如在<span class="number">1080</span>*<span class="number">1920</span>的xxhdip。<span class="number">3</span>倍dpi的，返回的就是数字<span class="number">30</span>，表示<span class="number">30</span>px。</div></pre></td></tr></table></figure>
<h3 id="11-23号-周一-天气巨冷，绿皮车都没发车"><a href="#11-23号-周一-天气巨冷，绿皮车都没发车" class="headerlink" title="11/23号 周一 天气巨冷，绿皮车都没发车"></a>11/23号 周一 天气巨冷，绿皮车都没发车</h3><p>activity状态保存恢复的官方文档<br><a href="http://developer.android.com/intl/zh-cn/training/basics/activity-lifecycle/recreating.html" target="_blank" rel="external">http://developer.android.com/intl/zh-cn/training/basics/activity-lifecycle/recreating.html</a></p>
<p>父类有个public的方法，子类有个private的方法，子类的@override是无效的，因为虚拟机会认为这不是一个方法。</p>
<h3 id="11-24号-周二"><a href="#11-24号-周二" class="headerlink" title="11/24号 周二"></a>11/24号 周二</h3><p>制作.9图片<br>右边和下边是选择内容区域，在右边和下边画上直线，交叉的区域就是内容区域。<br>什么事内容区域呢？<br>比如，我们给Button设置了一个.9.png作为背景，还要设置其<code>android:text</code>属性，设置的text所占的位置就是内容区域。</p>
<p>Android3.2之前<code>res/layout-large/main.xml</code>和<code>res/layout/main.xml</code>  7inch是分界线<br>Android3.2之后细化了。最小宽度限定符。比如：<code>res/layout-sw600dp/main.xml</code> sw是small width，最小宽度为600dp才会加载。这种方式是不区分屏幕方向的。<br>就要使用large限定符和sw600dp文件同时存在于项目res目录下。这俩布局是一样的，为了避免多余的重复布局，可以设置布局别名：<br><code>res/layout/main.xml</code>: 单面板布局<br><code>res/layout-large/main.xml</code>: 多面板布局<br><code>res/layout-sw600dp/main.xml</code>: 多面板布局<br>由于后两个文具文件一样，我们可以用以下两个文件代替上面三个布局文件：<br><code>res/layout/main.xml</code> 单面板布局<br><code>res/layout/main_twopanes.xml</code> 双面板布局<br>然后在res下建立<br><code>res/values/layout.xml</code>、<br><code>res/values-large/layout.xml</code>、<br><code>res/values-sw600dp/layout.xml</code>三个文件。<br>默认布局<br><code>res/values/layout.xml</code>:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;resources&gt;</div><div class="line">  &lt;item name="main" type="layout"&gt;@layout/main&lt;/item&gt;</div><div class="line">&lt;/resources&gt;</div></pre></td></tr></table></figure></p>
<p>Android3.2之前的平板布局<br><code>res/values-large/layout.xml</code>:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;resources&gt;</div><div class="line">  &lt;item name="main" type="layout"&gt;@layout/main_twopanes&lt;/item&gt;</div><div class="line">&lt;/resources&gt;</div></pre></td></tr></table></figure></p>
<p>Android3.2之后的平板布局<br><code>res/values-sw600dp/layout.xml</code>:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;resources&gt;</div><div class="line">  &lt;item name="main" type="layout"&gt;@layout/main_twopanes&lt;/item&gt;</div><div class="line">&lt;/resources&gt;</div></pre></td></tr></table></figure></p>
<p>这样就有了main为别名的布局。<br>在activity中<code>setContentView(R.layout.main)</code>;</p>
<p>屏幕方向限定符<br><code>res/values-sw600dp-land/layouts.xml</code>:横屏<br><code>res/values-sw600dp-port/layouts.xml</code>:竖屏</p>
<p>屏幕适配拆分宽高：<br><a href="http://www.jianshu.com/p/ad563d169871" target="_blank" rel="external">http://www.jianshu.com/p/ad563d169871</a><br>优点：适配精度比较准确，在不同设备视觉效果佳<br>缺点：工作量大，每个分辨率都需要拆分文件夹，为每种分辨率都需要生成尺寸资源文件。，如有遗漏，或者新出了一款分辨率的手机，布局会找不到而不显示。有比较明显的局限性。<br>静默安装<br><a href="http://www.trinea.cn/android/android-silent-install/" target="_blank" rel="external">http://www.trinea.cn/android/android-silent-install/</a><br>换肤<br><a href="http://blog.zhaiyifan.cn/2015/09/10/Android%E6%8D%A2%E8%82%A4%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/" target="_blank" rel="external">http://blog.zhaiyifan.cn/2015/09/10/Android%E6%8D%A2%E8%82%A4%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/</a></p>
<h3 id="11-27号-周五"><a href="#11-27号-周五" class="headerlink" title="11/27号 周五"></a>11/27号 周五</h3><p>从FirstActivity跳转到SecondActivity的时候，如果，SecondActivity发生了ANR，那么，一般情况是FirstActivity发生了耗时操作。<br>oncreate（）里面 ruturn后，onresume一样会走。<br>Log子线程可用。</p>
<h3 id="12-03号-周三"><a href="#12-03号-周三" class="headerlink" title="12/03号 周三"></a>12/03号 周三</h3><p>一个屡试不爽的eclipse项目转AS结构的方法。<br>先把要装化的项目单独在放到一个文件夹里面，新起个eclipse，workplace工作空间，然后import进去项目，然后export项目为AS结构，然后看到当前文件夹里面都出来gradle结构。然后打开AS，直接open选到相应的文件夹，ok。喝杯咖啡等几分钟就自动ok了<br>注意：最好再eclipse中就把那个该死的重复包名改掉！base跟主工程竟是相同包名，日了狗了。</p>
<p>删除一个Module，直接在IDE中选中Module后按Delete是删不掉的，需要先右键project→Open Module Settings→在弹出面板的左侧Modules一栏中选中要删除的Module→点击面板左上角的“-”符号→点击OK后回到IDE，然后选中要删掉的Module，按Delte快捷键删掉即可；</p>
<p>Android studio 看类方法的快捷键：Ctrl+F12， Ctrl+F11可以调出软键盘。</p>
<h3 id="12-05号-周六"><a href="#12-05号-周六" class="headerlink" title="12/05号 周六"></a>12/05号 周六</h3><p>微信网页版扫码登陆核心过程应该是：浏览器获得一个临时 id，通过长连接等待客户端扫描带有此 id 的二维码后，从长连接中获得客户端上报给 server 的帐号信息进行展示。 并在客户端点击确认后，获得服务器授信的令牌，进行随后的信息交互过程。 在超时、网络断开、其他设备上登录后，此前获得的令牌或丢失、或失效，对授权过程形成有效的安全防护。<br><a href="https://www.zhihu.com/question/20368066" target="_blank" rel="external">https://www.zhihu.com/question/20368066</a></p>
<p>在应用启动的时候，会首先调用<code>Application.attach()</code>，当然，这个方法是隐藏的，开发者能接触到的第一个被调用的方法其实是<code>Application.onCreate()</code><br>在Application中存在着几个有用的方法，比如<code>onLowMemory()</code>和<code>onTrimMemory()</code>，在这两个方法里面，我们可以实现自己的内存回收逻辑，比如关闭数据库连接、移除图片内存缓存等操作来降低内存消耗，从而降低被系统回收的风险。<br>在进行单例或者是静态变量的初始化操作时，一定要用Application作为Context进行初始化，否则会造成内存泄露的发生。使用Dialog的时候一般使用Activity作为Context，但是也可以使用Application作为上下文，前提是你必须设置Window类型为TYPE_SYSTEM_DIALOG，并且申请相关权限。这个时候弹出的Dialog是属于整个Application的，弹出这个Dialog的Activity销毁时也不会回收Dialog，只有在Application销毁时，这个Dialog才会自动消失。</p>
<p>盗墓笔记:</p>
<p>从Activity A进入到Activity B，回调顺序是onPause(A) -&gt; onCreate(B) -&gt; onStart(B) -&gt; onResume(B) -&gt; onStop(A)，所以不能在onPause方法中做重量级的操作.<br>onSaveInstanceState方法只会出现在Activity被异常终止的情况下，它的调用时机是在onStop之前，它和onPause方法没有既定的时序关系，可能在它之前，也可能在它之后。当Activity被重新创建的时候，onRestoreInstanceState会被回调，它的调用时机是onStart之后。<br>android:configChanges=”xxx”属性，常用的主要有下面三个选项：<br>local：设备的本地位置发生了变化，一般指切换了系统语言；<br>keyboardHidden：键盘的可访问性发生了变化，比如用户调出了键盘；<br>orientation：屏幕方向发生了变化，比如旋转了手机屏幕。<br>配置了android:configChanges=”xxx”属性之后，Activity就不会在对应变化发生时重新创建，而是调用Activity的onConfigurationChanged方法。<br>从非Activity类型的Context(例如ApplicationContext、Service等)中以standard模式启动新的Activity是不行的，因为这类context并没有任务栈，所以需要为待启动Activity指定FLAG_ACTIVITY_NEW_TASK标志位。<br>设置启动模式既可以使用xml属性android:launchMode，也可以使用代码intent.addFlags()。区别在于限定范围不同，前者无法直接为Activity设置FLAG_ACTIVITY_CLEAR_TOP标识，而后者无法为Activity指定singleInstance模式。<br>FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS：具有这个标记的Activity不会出现在历史Activity列表中，当某些情况下我们不希望用户通过历史列表回到我们的Activity的时候这个标记比较有用，它等同于属性设置android:excludeFromRecents=”true”。<br>IntentFilter中的data的结构很复杂，语法大致如下：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;data <span class="string">android:</span>scheme=<span class="string">"string"</span></div><div class="line"><span class="string">android:</span>host=<span class="string">"string"</span></div><div class="line"><span class="string">android:</span>port=<span class="string">"string"</span></div><div class="line"><span class="string">android:</span>path=<span class="string">"string"</span></div><div class="line"><span class="string">android:</span>pathPattern=<span class="string">"string"</span></div><div class="line"><span class="string">android:</span>pathPrefix=<span class="string">"string"</span></div><div class="line"><span class="string">android:</span>mimeType=<span class="string">"string"</span> /&gt;</div></pre></td></tr></table></figure></p>
<p>主要由mimeType和URI组成，其中mimeType代表媒体类型，而URI的结构也复杂，大致如下：</p>
<p><scheme>://<host>:<port>/[<path></path>]|[<pathprefix>]|[pathPattern]<br>例如content://com.example.project:200/folder/subfolder/etc<br>scheme、host、port分别表示URI的模式、主机名和端口号，其中如果scheme或者host未指定那么URI就无效。<br>path、pathPattern、pathPrefix都是表示路径信息，其中path表示完整的路径信息，pathPrefix表示路径的前缀信息；pathPattern表示完整的路径，但是它里面包含了通配符(*)。<br>如果要为Intent指定完整的data，必须要调用setDataAndType方法！<br>不能先调用setData然后调用setType，因为这两个方法会彼此清除对方的值。<br><code>intent.setDataAndType(Uri.parse(&quot;file://abc&quot;), &quot;image/png&quot;);</code></pathprefix></port></host></scheme></p>
<p>屏蔽该死的csdn右下角弹窗广告。chome插件adBlock 点击选项，点击自定义，添加过滤规则：<a href="http://blog.csdn.net/js/CsdnDialog.js" target="_blank" rel="external">http://blog.csdn.net/js/CsdnDialog.js</a></p>
<h3 id="12-08号-周二"><a href="#12-08号-周二" class="headerlink" title="12/08号 周二"></a>12/08号 周二</h3><p>Error:(26, 9) Attribute application@icon value=(@drawable/logo) from AndroidManifest.xml:26:9<br>Error:(28, 9) Attribute application@theme value=(@style/ThemeActionBar) from AndroidManifest.xml:28:9<br>is also present at XXXX-trunk:XXXXLib:unspecified:15:9 value=(@style/AppTheme)<br>Suggestion: add ‘tools:replace=”android:theme”‘ to <application> element at AndroidManifest.xml:24:5 to override<br>Error:Execution failed for task ‘:XXXX:processDebugManifest’.</application></p>
<blockquote>
<p>Manifest merger failed with multiple errors, see logs</p>
</blockquote>
<p>原因：<br>AS的Gradle插件默认会启用Manifest Merger Tool，若Library项目中也定义了与主项目相同的属性（例如默认生成的android:icon和android:theme），则此时会合并失败，并报上面的错误。</p>
<p>解决方法有以下2种：<br>方法1：在Manifest.xml的application标签下添加tools:replace=”android:icon, android:theme”（多个属性用,隔开，并且记住在manifest根标签上加入xmlns:tools=”<a href="http://schemas.android.com/tools&quot;，否则会找不到namespace哦）" target="_blank" rel="external">http://schemas.android.com/tools&quot;，否则会找不到namespace哦）</a><br>方法2：在build.gradle根标签上加上useOldManifestMerger true （懒人方法）</p>
<h3 id="12-09号-周三"><a href="#12-09号-周三" class="headerlink" title="12/09号 周三"></a>12/09号 周三</h3><p>取消android studio与svn的关联<br>       在日常android开发中，我们可能会碰到这么一个场景：将本地的代码share到svn的时候，又误删了svn上的代码。<br>       如果用的开发工具是android-studio，我们无法重新share该工程，就算删除掉每个目录下的.svn隐藏文件也不行。这个时候，只要再将.idea构建目录下的vcs.xml中的</p>
<p><mapping directory="" vcs="svn"><br> 还原回</mapping></p>
<p><mapping directory="" vcs=""><br> 即可。</mapping></p>
<p>单文件 签入当文件，右键subversion Add</p>
<p>文件红色：表示文件没有添加到服务器</p>
<p>绿色：表示没有更新新的修改到服务器</p>
<p>普通黑色：表示和服务器同步</p>
<p>ctrl+F12 ==== ctrl+O<br>连按两下shift 是快捷搜索类</p>
<h3 id="12-10号-周四"><a href="#12-10号-周四" class="headerlink" title="12/10号 周四"></a>12/10号 周四</h3><p>进程是系统分配资源和调度的基本单位，所以每个进程都有自己独立的资源和内存空间，别的进程是不能任意访问其他进程的内存和资源的。<br>那如何让自己的应用拥有多个进程？很简单，我们的四大组件在AndroidManifest文件中注册的时候，有个属性是android:process，1.这里可以指定组件的所处的进程。默认就是应用的主进程。指定为别的进程之后，系统在启动这个组件的时候，就先创建（如果还没创建的话）这个进程，然后再创建该组件。<br>再设置android:process属性时候，有个地方需要注意：如果是android:process=”:deamon”，以:开头的名字，则表示这是一个应用程序的私有进程，否则它是一个全局进程。私有进程的进程名称是会在冒号前自动加上包名，而全局进程则不会。<br>使用多进程显而易见的好处就是分担主进程的内存压力。<br>还有就是防止主进程被杀守护进程，守护进程和主进程之间相互监视，有一方被杀就重新启动它。</p>
<p>android:process=”:foo” 私有进程<br>android:process=”foo”全局进程。<br><a href="https://github.com/android-cn/android-discuss/issues/7" target="_blank" rel="external">https://github.com/android-cn/android-discuss/issues/7</a> 多线程相关问答。</p>
<p>关于UML中依赖，关联，组合，聚合，等等，解析的很棒<br><a href="http://www.cnblogs.com/olvo/archive/2012/05/03/2481014.html" target="_blank" rel="external">http://www.cnblogs.com/olvo/archive/2012/05/03/2481014.html</a></p>
<p><code>getApplication()</code>方法和<code>getApplicationContext()</code>方法获得的都是同一个对象，就是就是MyApplication本身的实例。<br>这两个方法在作用域上有比较大的区别，getApplication()方法的语义性非常强，一看就知道是用来获取Application实例的，但是这个方法只有在Activity和Service中才能调用的到。那么也许在绝大多数情况下我们都是在Activity或者Service中使用Application的，但是如果在一些其它的场景，比如BroadcastReceiver中也想获得Application的实例，这时就可以借助getApplicationContext()方法了。<br><a href="http://blog.csdn.net/guolin_blog/article/details/47028975" target="_blank" rel="external">http://blog.csdn.net/guolin_blog/article/details/47028975</a></p>
<h3 id="12-13号-周天"><a href="#12-13号-周天" class="headerlink" title="12/13号 周天"></a>12/13号 周天</h3><p>内置存储<br>getCacheDir()方法用于获取/data/data/<application package="">/cache目录<br>getFilesDir()方法用于获取/data/data/<application package="">/files目录<br>外置sd卡<br>通过Context.getExternalFilesDir()方法可以获取到 SDCard/Android/data/你的应用的包名/files/ 目录，一般放一些长时间保存的数据<br>通过Context.getExternalCacheDir()方法可以获取到 SDCard/Android/data/你的应用包名/cache/目录，一般存放临时缓存数据</application></application></p>

					</div>

			  <!-- about -->
			  
		</div>

		<!-- pagination -->
	  

		<div class="comment-section">
  
  
   <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="_posts/技术随笔（四）.md" data-title="技术随笔（四）" data-url="http://jijiaxin89.com/2015/11/03/技术随笔（四）/"></div>
    <!-- 多说评论框 end -->
   <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'jijiaxin'};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
  


</div>
	</div>

	

</div>


		<footer>
			

<p>
  由 <a href="https://hexo.io">hexo</a> 强力驱动 | 搭载 <a href="https://github.com/wayou/hexo-theme-material">material</a> 主题
</p>
<p>
  &copy; 2017 <a href="http://jijiaxin89.com"> 季訫 </a>
</p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	  </div>

		<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>

		<!-- material design -->
		<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script>
		<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>
		<!-- toc -->
		<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="/libs/tocify/jquery.tocify.custom.js"></script>

		<script src="/js/main.js"></script>

	</body>
</html>
